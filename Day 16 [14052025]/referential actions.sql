CREATE DATABASE DB16;
USE DB16;

CREATE TABLE DEPARTMENTS1(
	DEPT_ID INT PRIMARY KEY,
    DEPT_NAME VARCHAR(20) NOT NULL
);
INSERT INTO DEPARTMENTS1 VALUES
(101,"IT"),
(102,"HR"),
(103,"FINANCE");


CREATE TABLE EMPLOYEES1(
	EMP_ID INT PRIMARY KEY,
    EMP_NAME VARCHAR(20) NOT NULL,
    DEPT_ID INT NOT NULL,
    FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENTS1(DEPT_ID) ON DELETE CASCADE
); 
INSERT INTO EMPLOYEES1 VALUES 
(1,"E1",101),
(2,"E2",101),
(3,"E3",102);
SELECT * FROM DEPARTMENTS1;
SELECT * FROM EMPLOYEES1;

DELETE FROM DEPARTMENTS1 WHERE DEPT_ID = 103;
SELECT * FROM DEPARTMENTS1;

DELETE FROM DEPARTMENTS1 WHERE DEPT_ID = 101;
SELECT * FROM DEPARTMENTS1;
SELECT * FROM EMPLOYEES1;

DELETE FROM DEPARTMENTS1 WHERE DEPT_ID = 102;
SELECT * FROM EMPLOYEES1;


CREATE TABLE DEPARTMENTS0(
	DEPT_ID INT PRIMARY KEY,
    DEPT_NAME VARCHAR(20) NOT NULL
);
INSERT INTO DEPARTMENTS0 VALUES
(101,"IT"),
(102,"HR"),
(103,"FINANCE");


CREATE TABLE EMPLOYEES0(
	EMP_ID INT PRIMARY KEY,
    EMP_NAME VARCHAR(20) NOT NULL,
    DEPT_ID INT NOT NULL,
    FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENTS0(DEPT_ID)
); 
INSERT INTO EMPLOYEES0 VALUES 
(1,"E1",101),
(2,"E2",101),
(3,"E3",102);

SELECT * FROM DEPARTMENTS0;
SELECT * FROM EMPLOYEES0;

DELETE FROM DEPARTMENTS0 WHERE DEPT_ID = 103;
DELETE FROM DEPARTMENTS0 WHERE DEPT_ID = 101;
UPDATE DEPARTMENTS SET DEPT_ID = 1001 WHERE DEPT_ID = 101;

CREATE TABLE DEPARTMENTS2(
	DEPT_ID INT PRIMARY KEY,
    DEPT_NAME VARCHAR(20) NOT NULL
);
INSERT INTO DEPARTMENTS2 VALUES
(101,"IT"),
(102,"HR"),
(103,"FINANCE");


CREATE TABLE EMPLOYEES2(
	EMP_ID INT PRIMARY KEY,
    EMP_NAME VARCHAR(20) NOT NULL,
    DEPT_ID INT NOT NULL,
    FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENTS2(DEPT_ID) ON UPDATE CASCADE
); 
INSERT INTO EMPLOYEES2 VALUES 
(1,"E1",101),
(2,"E2",101),
(3,"E3",102);

SELECT * FROM DEPARTMENTS2;
SELECT * FROM EMPLOYEES2;

UPDATE DEPARTMENTS2 SET DEPT_ID = 1003 WHERE DEPT_ID = 103;

UPDATE DEPARTMENTS2 SET DEPT_ID = 1002 WHERE DEPT_ID = 102;

UPDATE DEPARTMENTS2 SET DEPT_ID = 1001 WHERE DEPT_ID = 101;



CREATE TABLE DEPARTMENTS3(
	DEPT_ID INT PRIMARY KEY,
    DEPT_NAME VARCHAR(20) NOT NULL
);
INSERT INTO DEPARTMENTS3 VALUES
(101,"IT"),
(102,"HR"),
(103,"FINANCE");


CREATE TABLE EMPLOYEES3(
	EMP_ID INT PRIMARY KEY,
    EMP_NAME VARCHAR(20) NOT NULL,
    DEPT_ID INT NOT NULL,
    FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENTS3(DEPT_ID) ON UPDATE CASCADE ON DELETE CASCADE
); 
INSERT INTO EMPLOYEES3 VALUES 
(1,"E1",101),
(2,"E2",101),
(3,"E3",102);

SELECT * FROM DEPARTMENTS2;
SELECT * FROM EMPLOYEES2;

UPDATE DEPARTMENTS3 SET DEPT_ID = 1001
WHERE DEPT_ID = 101;
SELECT * FROM DEPARTMENTS3;
SELECT * FROM EMPLOYEES3;

DELETE FROM DEPARTMENTS3
WHERE DEPT_ID = 102;
SELECT * FROM DEPARTMENTS3;
SELECT * FROM EMPLOYEES3;

-- SET NULL

CREATE TABLE DEPARTMENTS4(
	DEPT_ID INT PRIMARY KEY,
    DEPT_NAME VARCHAR(20) NOT NULL
);
INSERT INTO DEPARTMENTS4 VALUES
(101,"IT"),
(102,"HR"),
(103,"FINANCE");


CREATE TABLE EMPLOYEES4(
	EMP_ID INT PRIMARY KEY,
    EMP_NAME VARCHAR(20) NOT NULL,
    DEPT_ID INT,
    FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENTS4(DEPT_ID) ON DELETE SET NULL
); 
SELECT * FROM DEPARTMENTS4;
INSERT INTO EMPLOYEES4 VALUES 
(1,"E1",101),
(2,"E2",101),
(3,"E3",102);
SELECT * FROM EMPLOYEES4;

DELETE FROM DEPARTMENTS4
WHERE DEPT_ID = 103;

DELETE FROM DEPARTMENTS4
WHERE DEPT_ID = 101;
SELECT * FROM DEPARTMENTS4;
SELECT * FROM EMPLOYEES4;

UPDATE DEPARTMENTS4 SET DEPT_ID = 1002
WHERE DEPT_ID = 102;

-- RESTRICT 


CREATE TABLE DEPARTMENTS5(
	DEPT_ID INT PRIMARY KEY,
    DEPT_NAME VARCHAR(20) NOT NULL
);
INSERT INTO DEPARTMENTS5 VALUES
(101,"IT"),
(102,"HR"),
(103,"FINANCE");


CREATE TABLE EMPLOYEES5(
	EMP_ID INT PRIMARY KEY,
    EMP_NAME VARCHAR(20) NOT NULL,
    DEPT_ID INT,
    FOREIGN KEY (DEPT_ID) REFERENCES DEPARTMENTS5(DEPT_ID) ON UPDATE RESTRICT
); 
SELECT * FROM DEPARTMENTS4;
INSERT INTO EMPLOYEES5 VALUES 
(1,"E1",101),
(2,"E2",101),
(3,"E3",102);

SELECT * FROM DEPARTMENTS5;
SELECT * FROM EMPLOYEES5;

UPDATE DEPARTMENTS5 SET DEPT_ID = 1002
WHERE DEPT_ID = 102;

DELETE FROM DEPARTMENTS5
WHERE DEPT_ID = 102;